import{_ as D,C as k,c as $,o as j,j as n,G,a as z,w as X}from"./chunks/framework.CChaa6F5.js";(()=>{if(typeof window>"u"||!window.THREE||!window.Hands||!window.Camera)return;const y=40,h=.1;let w=!1,d=1,E,g,f,m,c,p;const H=document.getElementById("gesture-crush-container"),s=document.getElementById("status-bar"),P=document.getElementById("permission-modal");document.getElementById("permission-allow").addEventListener("click",()=>L());function R(){E=new THREE.Scene,E.fog=new THREE.Fog(328965,1,100);const{clientWidth:e,clientHeight:t}=H;g=new THREE.PerspectiveCamera(75,e/t,.1,1e3),g.position.z=25,f=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),f.setSize(e,t),f.setPixelRatio(window.devicePixelRatio),H.appendChild(f.domElement),E.add(new THREE.AmbientLight(16777215,.7)),A(),window.addEventListener("resize",b,!1)}function A(){const t=new THREE.TorusKnotGeometry(4,1.5,200,32).getAttribute("position"),r=t.count,i=new THREE.BufferGeometry,l=new Float32Array(r*3);c=new Float32Array(r*3),p=new Float32Array(r*3);for(let u=0;u<r;u++){const a=u*3;c[a]=t.getX(u)*1.5,c[a+1]=t.getY(u)*1.5,c[a+2]=t.getZ(u)*1.5,p[a]=(Math.random()-.5)*y,p[a+1]=(Math.random()-.5)*y,p[a+2]=(Math.random()-.5)*y,l[a]=c[a],l[a+1]=c[a+1],l[a+2]=c[a+2]}i.setAttribute("position",new THREE.BufferAttribute(l,3));const o=new THREE.PointsMaterial({color:65535,size:.15,blending:THREE.AdditiveBlending,transparent:!0,opacity:.8,depthWrite:!1});m=new THREE.Points(i,o),E.add(m)}function v(){requestAnimationFrame(v);const e=m.geometry.attributes.position.array,t=c.length/3,r=1-d,i=h*.5;for(let l=0;l<t;l++){const o=l*3,u=c[o],a=c[o+1],T=c[o+2],x=p[o],B=p[o+1],S=p[o+2],F=u+(x-u)*r,I=a+(B-a)*r,N=T+(S-T)*r;e[o]+=(F-e[o])*i,e[o+1]+=(I-e[o+1])*i,e[o+2]+=(N-e[o+2])*i}m.geometry.attributes.position.needsUpdate=!0,m.rotation.y+=.005,m.rotation.x=Math.sin(m.rotation.y)*.1,f.render(E,g)}function C(e){if(w)if(e.multiHandLandmarks&&e.multiHandLandmarks.length>0){const t=e.multiHandLandmarks[0],r=t[0],i=[4,8,12,16,20];let l=0;i.forEach(a=>{const T=t[a],x=Math.sqrt((T.x-r.x)**2+(T.y-r.y)**2);l+=x}),l/=i.length;const o=.15;d=(l-o)/(.45-o),d=Math.min(Math.max(d,0),1),d<.2?(s.innerHTML=`æ‰‹åŠ¿å› å­: ${d.toFixed(2)} | ç”¨åŠ›æç¢ä¸­... ğŸ’¥`,s.className="hand-closed",m.material.color.set(16711680)):d>.8?(s.innerHTML=`æ‰‹åŠ¿å› å­: ${d.toFixed(2)} | é‡æ„æ¨¡å‹... âœ¨`,s.className="hand-open",m.material.color.set(65535)):(s.innerHTML=`æ‰‹åŠ¿å› å­: ${d.toFixed(2)} | ç¼“æ…¢å˜åŒ–ä¸­...`,s.className="",m.material.color.set(16777215))}else s.innerHTML="ç­‰å¾…æ‰‹åŠ¿...",s.className="loading",d*=.95}function L(e){P.style.display="none",w=!0,_()}function _(){const e=document.getElementById("input_video");s.innerHTML="æ­£åœ¨åˆå§‹åŒ– AI æ¨¡å‹...";const t=new Hands({locateFile:i=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${i}`});t.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),t.onResults(C),new Camera(e,{onFrame:async()=>{w&&await t.send({image:e})},width:640,height:480}).start().then(()=>{s.innerHTML="AI å¯åŠ¨æˆåŠŸï¼Œè¯·é è¿‘æ‘„åƒå¤´å¹¶å¼ å¼€æ‰‹æŒ..."}).catch(i=>{w=!1,s.innerHTML=`æ‘„åƒå¤´å¯åŠ¨å¤±è´¥: ${i} (è¯·æ£€æŸ¥ HTTPS/æƒé™)`,s.className="hand-closed"})}function b(){const{clientWidth:e,clientHeight:t}=H;g.aspect=e/t,g.updateProjectionMatrix(),f.setSize(e,t)}function M(){R(),v()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",M):M()})();const U=JSON.parse('{"title":"æ‰‹åŠ¿æç¢æ¨¡å‹","description":"åŸºäº Three.js + MediaPipe çš„æ‰‹åŠ¿é©±åŠ¨ç²’å­åŒ–æ•ˆæœ","frontmatter":{"title":"æ‰‹åŠ¿æç¢æ¨¡å‹","description":"åŸºäº Three.js + MediaPipe çš„æ‰‹åŠ¿é©±åŠ¨ç²’å­åŒ–æ•ˆæœ","layout":"page"},"headers":[],"relativePath":"threejs/gesture-crush.md","filePath":"threejs/gesture-crush.md"}'),O={name:"threejs/gesture-crush.md"};function W(y,h,w,d,E,g){const f=k("ClientOnly");return j(),$("div",null,[h[1]||(h[1]=n("h1",{id:"æ‰‹åŠ¿æç¢æ¨¡å‹",tabindex:"-1"},[z("æ‰‹åŠ¿æç¢æ¨¡å‹ "),n("a",{class:"header-anchor",href:"#æ‰‹åŠ¿æç¢æ¨¡å‹","aria-label":'Permalink to "æ‰‹åŠ¿æç¢æ¨¡å‹"'},"â€‹")],-1)),G(f,null,{default:X(()=>[...h[0]||(h[0]=[n("div",{class:"gesture-crush-app"},[n("div",{class:"demo-header"},[n("h2",null,"ğŸ’¥ å¼ å¼€é‡æ„ï¼Œæ¡æ‹³æç¢"),n("p",null,"å…è®¸æ‘„åƒå¤´åï¼Œå¼ å¼€æ‰‹æŒæ¨¡å‹ä¼šé‡æ–°èšåˆï¼Œç¼“æ…¢æ¡æ‹³å³å¯è®©æ¨¡å‹ç²’å­åŒ–å¹¶å‘å¤–æ‰©æ•£ã€‚"),n("ul",null,[n("li",null,"ğŸ‘‹ ä»…è¯†åˆ«ä¸€åªæ‰‹ï¼Œä¿æŒæ‰‹æŒåœ¨ç”»é¢ä¸­å¤®"),n("li",null,"ğŸ–¥ï¸ å»ºè®®ä½¿ç”¨ HTTPS ç¯å¢ƒï¼Œä»¥ä¾¿é¡ºåˆ©å¯ç”¨æ‘„åƒå¤´"),n("li",null,"âš™ï¸ å¦‚æƒé™è¢«æ‹’ï¼Œå¯åˆ·æ–°é¡µé¢é‡æ–°æˆæƒ")])]),n("div",{id:"gesture-crush-container",class:"gesture-crush-canvas"}),n("div",{id:"status-bar",class:"loading"},"æ­£åœ¨åŠ è½½èµ„æº..."),n("video",{id:"input_video",playsinline:""}),n("div",{id:"permission-modal"},[n("div",{class:"modal-content"},[n("h3",null,"æ‰‹åŠ¿æ¨¡å‹äº¤äº’ Demo"),n("p",null,"æœ¬åº”ç”¨éœ€è¦ä½¿ç”¨æ‚¨çš„æ‘„åƒå¤´è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«ã€‚"),n("p",null,"è¯·ä¿æŒå¼ å¼€æ‰‹æ¥é‡æ„æ¨¡å‹ï¼Œæ…¢æ…¢æ¡æ‹³æ¥æç¢æ¨¡å‹ï¼"),n("button",{id:"permission-allow"},"å…è®¸è®¿é—®å¹¶å¼€å§‹")])])],-1)])]),_:1})])}const V=D(O,[["render",W]]);export{U as __pageData,V as default};
